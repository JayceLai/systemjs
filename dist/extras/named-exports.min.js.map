{"version":3,"file":"named-exports.min.js","sources":["../../src/extras/named-exports.js"],"sourcesContent":["/*\r\n * Named exports support for legacy module formats in SystemJS 2.0\r\n * \r\n * Note: This extra is deprecated as the behaviour is now the default in core,\r\n *       so will be removed in the next major.\r\n */\r\n(function (global) {\r\n  var systemJSPrototype = global.System.constructor.prototype;\r\n\r\n  // hook System.register to know the last declaration binding\r\n  var lastRegisterDeclare;\r\n  var systemRegister = systemJSPrototype.register;\r\n  systemJSPrototype.register = function (name, deps, declare) {\r\n    lastRegisterDeclare = typeof name === 'string' ? declare : deps;\r\n    // The js file compiled from tsc has not endwith .js, so this will make a error in browser\r\n    if(Array.isArray(name)) name.forEach((e, i, a)=>{if(e.includes(\"./\")) a[i]=e+\".js\";});\r\n    systemRegister.apply(this, arguments);\r\n  };\r\n\r\n  var getRegister = systemJSPrototype.getRegister;\r\n  systemJSPrototype.getRegister = function () {\r\n    var register = getRegister.call(this);\r\n    // if it is an actual System.register call, then its ESM\r\n    // -> dont add named exports\r\n    if (!register || register[1] === lastRegisterDeclare || register[1].length === 0)\r\n      return register;\r\n\r\n    // otherwise it was provided by a custom instantiator\r\n    // -> extend the registration with named exports support\r\n    var registerDeclare = register[1];\r\n    register[1] = function (_export, _context) {\r\n      // hook the _export function to note the default export\r\n      var defaultExport, hasDefaultExport = false;\r\n      var declaration = registerDeclare.call(this, function (name, value) {\r\n        if (typeof name === 'object' && name && name.__useDefault)\r\n          defaultExport = name.default, hasDefaultExport = true;\r\n        else if (name === 'default')\r\n          defaultExport = value;\r\n        else if (name === '__useDefault')\r\n          hasDefaultExport = true;\r\n        _export(name, value);\r\n      }, _context);\r\n      // hook the execute function\r\n      var execute = declaration.execute;\r\n      if (execute)\r\n        declaration.execute = function () {\r\n          execute.call(this);\r\n          // do a bulk export of the default export object\r\n          // to export all its names as named exports\r\n\r\n          if (hasDefaultExport)\r\n            for (var exportName in defaultExport) {\r\n              if (\r\n                Object.prototype.hasOwnProperty.call(defaultExport,  exportName) // Check if epoxrt name is not inherited, safe for Object.create(null)\r\n                && exportName !== 'default' // default is not a named export\r\n              ) {\r\n                _export(exportName, defaultExport[exportName]);\r\n              }\r\n            }\r\n        };\r\n      return declaration;\r\n    };\r\n    return register;\r\n  };\r\n})(typeof self !== 'undefined' ? self : global);\r\n"],"names":["global","lastRegisterDeclare","systemJSPrototype","System","constructor","prototype","systemRegister","register","name","deps","declare","Array","isArray","forEach","e","i","a","includes","apply","this","arguments","getRegister","call","length","registerDeclare","_export","_context","defaultExport","hasDefaultExport","declaration","value","__useDefault","default","execute","exportName","Object","hasOwnProperty","self"],"mappings":"CAMA,SAAWA,GACT,IAGIC,EAHAC,EAAoBF,EAAOG,OAAOC,YAAYC,UAI9CC,EAAiBJ,EAAkBK,SACvCL,EAAkBK,SAAW,SAAUC,EAAMC,EAAMC,GACjDT,EAAsC,iBAATO,EAAoBE,EAAUD,EAExDE,MAAMC,QAAQJ,IAAOA,EAAKK,QAAQ,CAACC,EAAGC,EAAGC,KAAQF,EAAEG,SAAS,QAAOD,EAAED,GAAGD,EAAE,SAC7ER,EAAeY,MAAMC,KAAMC,YAG7B,IAAIC,EAAcnB,EAAkBmB,YACpCnB,EAAkBmB,YAAc,WAC9B,IAAId,EAAWc,EAAYC,KAAKH,MAGhC,IAAKZ,GAAYA,EAAS,KAAON,GAA8C,IAAvBM,EAAS,GAAGgB,OAClE,OAAOhB,EAIT,IAAIiB,EAAkBjB,EAAS,GAiC/B,OAhCAA,EAAS,GAAK,SAAUkB,EAASC,GAE/B,IAAIC,EAAeC,GAAmB,EAClCC,EAAcL,EAAgBF,KAAKH,MAAM,SAAUX,EAAMsB,GACvC,iBAATtB,GAAqBA,GAAQA,EAAKuB,cAC3CJ,EAAgBnB,EAAKwB,QAASJ,GAAmB,GACjC,YAATpB,EACPmB,EAAgBG,EACA,iBAATtB,IACPoB,GAAmB,GACrBH,EAAQjB,EAAMsB,KACbJ,GAECO,EAAUJ,EAAYI,QAiB1B,OAhBIA,IACFJ,EAAYI,QAAU,WAKpB,GAJAA,EAAQX,KAAKH,MAITS,EACF,IAAK,IAAIM,KAAcP,GAEnBQ,IAAiBC,eAAed,KAAKK,EAAgBO,IACnC,YAAfA,GAEHT,EAAQS,EAAYP,EAAcO,MAIrCL,GAEFtB,GAxDX,CA0DmB,oBAAT8B,KAAuBA,KAAOrC"}